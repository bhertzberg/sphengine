<!DOCTYPE html>
<html lang = "en">
<head>
    <meta charset = "UTF-8">
    <meta name = "viewport" content = "width=devide-width", initial-scale = "1.0">
    <title>Sphengine JSON Generator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class = "form-container">
        <hi>Generate config JSON for your sphere engine project</hi>
        <form id = "operator-inputs">
            <label for="spheng_id">Sphere Engine Workspace Project ID</label>
            <input type = "text" id = "spheng_id" required> <br>

            <label for = "extract">Do you want to extract any files from the workspace?</label>
            <input type = "checkbox" id = "extract" onchange="toggleExtractFilesInput()"><br>

            <label for="extract_files">Enter files to extract in comma separated list</label>
            <input type="text" id = "extract_files" style ="display:none" placeholder="e.g., main.py, test.py"><br>

            <label for = "lang">Select Programming Language</label>
            <select id="lang">
                <option value="cpp">C++</option>
                <option value="java">Java</option>
                <option value = "python">Python</option>
            </select><br>


            <label for = "custom">Do you need custom input files from metadata?</label>
            <input type = "checkbox" id = "custom" onchange="toggleCustomFilesInput()"><br>

            <label for="custom_files">Enter custom files in comma separated list</label>
            <input type="text" id = "custom_files" style ="display:none" placeholder="e.g., metadata.sql_query, metadata.database"><br>

            <button type="button" onclick="generateJson()">Generate JSON</button>
        </form>

        <div id="json-output"></div>

    </div>

    <script>
        function toggleExtractFilesInput(){
            const extractCheckbox = document.getElementById("extract");
            const extractFilesInput = document.getElementById("extract_files");

            if(extractCheckbox.checked){
                extractFilesInput.style.display = "block"
            } else {
                extractFilesInput.style.display = "none"
            }
        }
        function toggleCustomFilesInput(){
            const customCheckbox = document.getElementById("custom");
            const customFilesInput = document.getElementById("custom_files");

            if(customCheckbox.checked){
                customFilesInput.style.display = "block"
            } else {
                customFilesInput.style.display = "none"
            }
        }
        function generateJson() {
            const sphengId = document.getElementById("spheng_id").value;
            const lang = document.getElementById("lang").value;
            const extract = document.getElementById("extract").checked;
            const extractFiles = document.getElementById("extract_files").value;
            const custom = document.getElementById("custom").checked;
            const customFiles = document.getElementById("custom_files").value;

            const jsonData = {
                spheng_id: sphengId,
                language: lang,
                // extract_files: extractFiles,
                // custom_files: customFiles
            };

            if (extract){
                jsonData.extract_files = extractFiles.split(',').map(file =>file.trim());
            }
            if (custom){
                jsonData.custom_files = customFiles.split(',').map(file =>file.trim());
            }
            document.getElementById("json-output").textContent = JSON.stringify(jsonData, null, 2)
        }
    </script>
</body>
</html>